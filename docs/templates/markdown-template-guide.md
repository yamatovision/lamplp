# AppGenius Markdown テンプレートガイド

**バージョン**: 1.0.0  
**最終更新日**: 2025-05-16  
**作成者**: ドキュメント構造設計チーム  
**ステータス**: 確定  

## 1. 概要

このガイドでは、AppGeniusプロジェクトで使用するMarkdownテンプレートの標準と、視覚的デザイン要素の実装方法について説明します。ここで定義された標準に従うことで、ドキュメントの一貫性と可読性を確保し、AIエージェント間の効率的な協働を促進します。

## 2. 基本テンプレート構造

すべてのMarkdownドキュメントは、以下の基本構造に従います：

```markdown
# [ドキュメントタイトル]

**バージョン**: X.Y.Z  
**最終更新日**: YYYY-MM-DD  
**作成者**: [作成者名/エージェント名] (#[エージェント番号])  
**ステータス**: [ドラフト/レビュー中/確定/廃止]  

## 1. 概要

[ドキュメントの目的と範囲の簡潔な説明]

## 2. [主要セクション]

[セクションの内容]

## 3. [主要セクション]

[セクションの内容]

## N. 関連ドキュメント

- [関連ドキュメント1へのリンク](/path/to/document1.md)
- [関連ドキュメント2へのリンク](/path/to/document2.md)

## N+1. 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|----------|-------|---------|
| YYYY-MM-DD | X.Y.Z | [名前/エージェント] | [変更内容の説明] |
```

## 3. ドキュメントタイプ別テンプレート

### 3.1 要件定義書テンプレート

[要件定義書](/docs/templates/requirements-template.md)は以下の構造に従います：

```markdown
# [プロジェクト名] 要件定義書

**バージョン**: X.Y.Z  
**最終更新日**: YYYY-MM-DD  
**作成者**: [作成者名/エージェント名] (#[エージェント番号])  
**ステータス**: [ドラフト/レビュー中/確定]  

## 1. プロジェクト概要

### 1.1 目的と背景
[本プロジェクトが解決する課題と提供する価値の説明]

### 1.2 ターゲットユーザー
- [主要ユーザー層1]: [特性と目的]
- [主要ユーザー層2]: [特性と目的]

### 1.3 核となる機能と価値
- [主要機能1]: [提供する価値]
- [主要機能2]: [提供する価値]

## 2. 画面一覧

### 2.1 ページ一覧
| ID | 画面名 | 目的 | 優先度 | モックアップ | 実装状況 |
|----|------|------|-------|------------|---------|
| P-001 | [画面名] | [目的] | [高/中/低] | [リンク] | [状況] |

### 2.2 画面フロー
```mermaid
flowchart LR
    A[画面1] --> B[画面2]
    B --> C[画面3]
    B --> D[画面4]
```

## 3. 画面詳細
[各画面の詳細情報]

## 4. 共通コンポーネント
[共通コンポーネントの一覧と説明]

## 5. データモデル概要
[主要エンティティとその関係性]

## 6. API要件概要
[必要なAPIエンドポイント]

## 7. 非機能要件
[パフォーマンス、セキュリティ、ユーザビリティなどの要件]

## 8. 技術スタック
[使用する技術の一覧]

## 9. 開発計画とマイルストーン
[開発スケジュールと主要マイルストーン]

## 10. 実装状況概要
[現在の実装状況]

## 11. 添付資料
[補足資料へのリンク]

## 12. 変更履歴
[変更の記録]
```

### 3.2 SCOPE_PROGRESS テンプレート

[SCOPE_PROGRESS](/docs/templates/current-status-template.md)は以下の構造に従います：

```markdown
# スコープ進捗状況: [機能名/ページ名]

## 1. 基本情報

- **スコープID**: [スコープ識別子]
- **優先度**: [高/中/低]
- **担当**: [エージェント名] (#[エージェント番号])
- **ステータス**: [実装中/レビュー中/完了] ([進捗率]% 完了)
- **開始日**: YYYY-MM-DD
- **目標完了日**: YYYY-MM-DD
- **前提条件**: [必要な前提条件]
- **完了タスク数**: X/Y
- **進捗率**: Z%
- **最終更新日**: YYYY-MM-DD

## 2. 実装概要

[この機能の目的と重要性の簡潔な説明]

## 3. 参照ドキュメント

- **要件定義**: [リンク]
- **モックアップ**: [リンク]
- **API仕様**: [リンク]
- **型定義**: [リンク]

## 4. 依存関係

- **前提となる機能**: [依存する機能]
- **影響を与える機能**: [影響を受ける機能]
- **外部サービス依存**: [依存外部サービス]

## 5. データフロー

```mermaid
flowchart LR
    A[ステップ1] --> B[ステップ2]
    B --> C[ステップ3]
    D[外部サービス] --> B
```

## 6. タスクリスト

### [カテゴリ1]

- [x] **[タスクID]**: [タスク名]
  - 完了日: YYYY-MM-DD
  - 担当: [エージェント名] (#[エージェント番号])
  - 参照: [関連ファイル]
  - 型定義: [関連型定義]

- [ ] **[タスクID]**: [タスク名]
  - 目標: YYYY-MM-DD
  - 担当: [エージェント名] (#[エージェント番号])
  - 依存: [依存タスク]
  - サブタスク:
    - [x] [サブタスク1]
    - [ ] [サブタスク2]

### [カテゴリ2]

- [ ] **[タスクID]**: [タスク名]
  - 目標: YYYY-MM-DD
  - 担当: [エージェント名] (#[エージェント番号])
  - ブロッカー: [ブロッカーの説明]

## 7. 実装上の注意点

- [注意点1]
- [注意点2]

## 8. リスク管理

| リスク | 影響度 | 発生確率 | 対策 | ステータス |
|-------|--------|---------|------|----------|
| [リスク1] | [高/中/低] | [高/中/低] | [対策] | [監視中/対策済み] |

## 9. 開発コマンド集

```bash
# コマンド例1
command_1 --option

# コマンド例2
command_2 --option
```

## 10. エラー引き継ぎログ

【[タスクID]】[タスク名]
- 問題：[問題の詳細]
- 試行：[試行した解決策]
- 結果：[結果]
- 解決策：[解決策または回避策]
- メモ：[追加情報]
- 参考：[参考資料]

## 11. 実装状況の更新履歴

- **YYYY-MM-DD**: [更新内容]
- **YYYY-MM-DD**: [更新内容]

## 12. 決定事項とオープンな質問

### 決定事項
1. [決定事項1] (YYYY-MM-DD)
2. [決定事項2] (YYYY-MM-DD)

### オープンな質問
1. [未解決の質問1]
2. [未解決の質問2]
```

### 3.3 API仕様書テンプレート

[API仕様書](/docs/templates/api-spec-template.md)は以下の構造に従います：

```markdown
# [API名] API仕様書

**バージョン**: X.Y.Z  
**最終更新日**: YYYY-MM-DD  
**作成者**: [作成者名/エージェント名] (#[エージェント番号])  
**ステータス**: [ドラフト/レビュー中/確定]  

## 1. 概要

[この API の目的と主要機能の説明]

## 2. ベースURL

```
https://api.example.com/api/v1
```

## 3. 認証

[認証方式の説明]

## 4. エンドポイント一覧

| 方法 | パス | 説明 | 権限 |
|-----|-----|------|------|
| GET | /[リソース] | [説明] | [必要権限] |
| POST | /[リソース] | [説明] | [必要権限] |

## 5. エンドポイント詳細

### 5.1 GET /[リソース]

#### 説明
[このエンドポイントの詳細な説明]

#### リクエストパラメータ
| パラメータ | 型 | 必須 | 説明 |
|----------|-----|-----|------|
| [パラメータ名] | [型] | [はい/いいえ] | [説明] |

#### リクエスト例
```http
GET /api/v1/[リソース]?[パラメータ]=[値] HTTP/1.1
Host: api.example.com
Authorization: Bearer [トークン]
```

#### レスポンス
**型定義**: [型定義へのリンク](/shared/index.ts#XX-YY)

```json
{
  "data": [
    {
      "id": "example-id",
      "property": "value"
    }
  ],
  "status": "success",
  "message": "Success message"
}
```

#### エラーレスポンス
| ステータスコード | 説明 | 対応方法 |
|----------------|------|---------|
| 400 | [エラー説明] | [対応方法] |
| 401 | [エラー説明] | [対応方法] |
| 403 | [エラー説明] | [対応方法] |
| 404 | [エラー説明] | [対応方法] |
| 500 | [エラー説明] | [対応方法] |

### 5.2 POST /[リソース]

[同様の構造...]

## 6. データモデル

### 6.1 [モデル名]

**型定義**: [型定義へのリンク](/shared/index.ts#XX-YY)

| フィールド | 型 | 説明 |
|----------|-----|------|
| [フィールド名] | [型] | [説明] |

## 7. 共通レスポンス構造

**型定義**: [ApiResponse<T>](/shared/index.ts#XX-YY)

```json
{
  "data": T,
  "status": "success" | "error",
  "message": "文字列メッセージ",
  "errors": [
    {
      "code": "エラーコード",
      "message": "エラーメッセージ",
      "field": "関連フィールド（オプショナル）"
    }
  ]
}
```

## 8. エラーコード一覧

| コード | 説明 |
|-------|------|
| [エラーコード] | [説明] |

## 9. レート制限

[レート制限に関する情報]

## 10. 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|----------|-------|---------|
| YYYY-MM-DD | X.Y.Z | [名前/エージェント] | [変更内容の説明] |
```

### 3.4 データモデル仕様テンプレート

[データモデル仕様](/docs/templates/data-model-template.md)は以下の構造に従います：

```markdown
# [エンティティ名] データモデル仕様

**バージョン**: X.Y.Z  
**最終更新日**: YYYY-MM-DD  
**作成者**: [作成者名/エージェント名] (#[エージェント番号])  
**ステータス**: [ドラフト/レビュー中/確定]  

## 1. 概要

[このデータモデルの目的と使用コンテキストの説明]

## 2. 型定義

**型定義場所**: [型定義へのリンク](/shared/index.ts#XX-YY)

```typescript
interface [エンティティ名] {
  id: string;
  property1: string;
  property2: number;
  relationship1: [RelatedEntity][];
  // その他のプロパティ
}
```

## 3. プロパティ詳細

| プロパティ | 型 | 必須 | 説明 | バリデーションルール |
|----------|-----|-----|------|-------------------|
| id | string | はい | 一意識別子 | UUID v4形式 |
| property1 | string | はい | [説明] | [ルール] |
| property2 | number | いいえ | [説明] | [ルール] |

## 4. リレーションシップ

| リレーション名 | 関連エンティティ | カーディナリティ | 説明 |
|--------------|----------------|---------------|------|
| relationship1 | [RelatedEntity] | 1:N | [説明] |

## 5. ER図

```mermaid
erDiagram
    ENTITY1 ||--o{ ENTITY2 : contains
    ENTITY1 {
        string id
        string property1
        number property2
    }
    ENTITY2 {
        string id
        string entity1_id
        string name
    }
```

## 6. データフロー

[このエンティティが関わる主要なデータフローの説明]

## 7. 使用例

### 7.1 データ作成例

```typescript
const new[エンティティ名] = {
  id: "123e4567-e89b-12d3-a456-426614174000",
  property1: "example value",
  property2: 42,
  // その他のプロパティ
};
```

### 7.2 API使用例

```typescript
// エンティティ取得例
const entity = await api.get[エンティティ名](id);

// エンティティ作成例
const created = await api.create[エンティティ名](new[エンティティ名]);
```

## 8. マイグレーション考慮事項

[データモデル変更時の考慮事項]

## 9. パフォーマンス考慮事項

[パフォーマンスに関する注意点]

## 10. セキュリティ考慮事項

[セキュリティに関する注意点]

## 11. 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|----------|-------|---------|
| YYYY-MM-DD | X.Y.Z | [名前/エージェント] | [変更内容の説明] |
```

### 3.5 移行ガイドテンプレート

[移行ガイド](/docs/templates/migration-guide-template.md)は以下の構造に従います：

```markdown
# [機能名/コンポーネント名] 移行ガイド

**バージョン**: X.Y.Z  
**最終更新日**: YYYY-MM-DD  
**作成者**: [作成者名/エージェント名] (#[エージェント番号])  
**ステータス**: [ドラフト/レビュー中/確定]  

## 1. 概要

[この移行の目的と背景の説明]

## 2. 前提条件

- [前提条件1]
- [前提条件2]

## 3. 影響範囲

| 影響コンポーネント | 変更の性質 | 影響度 |
|-----------------|----------|-------|
| [コンポーネント1] | [変更内容] | [高/中/低] |
| [コンポーネント2] | [変更内容] | [高/中/低] |

## 4. 移行手順

### 4.1 準備フェーズ

1. [準備タスク1]
2. [準備タスク2]

### 4.2 実行フェーズ

1. [実行タスク1]
2. [実行タスク2]

### 4.3 検証フェーズ

1. [検証タスク1]
2. [検証タスク2]

## 5. ロールバック計画

[問題発生時のロールバック手順]

## 6. スケジュール

| フェーズ | 開始日 | 終了日 | 担当者 |
|---------|-------|-------|-------|
| 準備 | YYYY-MM-DD | YYYY-MM-DD | [担当者] |
| 実行 | YYYY-MM-DD | YYYY-MM-DD | [担当者] |
| 検証 | YYYY-MM-DD | YYYY-MM-DD | [担当者] |

## 7. リスクと緩和策

| リスク | 影響度 | 発生確率 | 緩和策 |
|-------|--------|---------|-------|
| [リスク1] | [高/中/低] | [高/中/低] | [緩和策] |
| [リスク2] | [高/中/低] | [高/中/低] | [緩和策] |

## 8. 連絡先とサポート

[サポート情報]

## 9. 関連ドキュメント

- [関連ドキュメント1へのリンク]
- [関連ドキュメント2へのリンク]

## 10. 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|----------|-------|---------|
| YYYY-MM-DD | X.Y.Z | [名前/エージェント] | [変更内容の説明] |
```

## 4. 視覚的デザイン要素

### 4.1 Mermaid図表の使用

Markdownドキュメント内で図表を表現するには、[Mermaid](https://mermaid-js.github.io/mermaid/)構文を使用します。

#### フローチャート例

```markdown
```mermaid
flowchart LR
    A[開始] --> B{条件判断}
    B -->|Yes| C[処理1]
    B -->|No| D[処理2]
    C --> E[終了]
    D --> E
```
```

上記のコードは以下のように表示されます：

```mermaid
flowchart LR
    A[開始] --> B{条件判断}
    B -->|Yes| C[処理1]
    B -->|No| D[処理2]
    C --> E[終了]
    D --> E
```

#### シーケンス図例

```markdown
```mermaid
sequenceDiagram
    participant ユーザー
    participant アプリ
    participant API
    participant DB
    
    ユーザー->>アプリ: アクション実行
    アプリ->>API: リクエスト送信
    API->>DB: データ照会
    DB-->>API: データ返却
    API-->>アプリ: レスポンス
    アプリ-->>ユーザー: 結果表示
```
```

上記のコードは以下のように表示されます：

```mermaid
sequenceDiagram
    participant ユーザー
    participant アプリ
    participant API
    participant DB
    
    ユーザー->>アプリ: アクション実行
    アプリ->>API: リクエスト送信
    API->>DB: データ照会
    DB-->>API: データ返却
    API-->>アプリ: レスポンス
    アプリ-->>ユーザー: 結果表示
```

#### ER図例

```markdown
```mermaid
erDiagram
    USER ||--o{ ORDER : places
    USER {
        string id
        string name
        string email
    }
    ORDER {
        string id
        string user_id
        date created_at
    }
    ORDER ||--|{ ORDER_ITEM : contains
    ORDER_ITEM {
        string id
        string order_id
        string product_id
        number quantity
    }
```
```

上記のコードは以下のように表示されます：

```mermaid
erDiagram
    USER ||--o{ ORDER : places
    USER {
        string id
        string name
        string email
    }
    ORDER {
        string id
        string user_id
        date created_at
    }
    ORDER ||--|{ ORDER_ITEM : contains
    ORDER_ITEM {
        string id
        string order_id
        string product_id
        number quantity
    }
```

### 4.2 テーブル書式

データを表形式で表現する際は、以下の書式を使用します：

```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| データ1-1 | データ1-2 | データ1-3 |
| データ2-1 | データ2-2 | データ2-3 |
```

上記のコードは以下のように表示されます：

| 列1 | 列2 | 列3 |
|-----|-----|-----|
| データ1-1 | データ1-2 | データ1-3 |
| データ2-1 | データ2-2 | データ2-3 |

列の位置合わせも可能です：

```markdown
| 左揃え | 中央揃え | 右揃え |
|:------|:-------:|------:|
| テキスト | テキスト | テキスト |
| 長いテキスト | 長いテキスト | 長いテキスト |
```

上記のコードは以下のように表示されます：

| 左揃え | 中央揃え | 右揃え |
|:------|:-------:|------:|
| テキスト | テキスト | テキスト |
| 長いテキスト | 長いテキスト | 長いテキスト |

### 4.3 コードブロック

コードを表示する際は、言語指定付きのコードブロックを使用します：

#### TypeScriptの例

```markdown
```typescript
interface User {
  id: string;
  name: string;
  email: string;
  roles: string[];
}

function getUserById(id: string): Promise<User> {
  return api.get(`/users/${id}`);
}
```
```

#### JSONの例

```markdown
```json
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "name": "John Doe",
  "email": "john@example.com",
  "roles": ["admin", "user"]
}
```
```

#### HTTPリクエスト/レスポンスの例

```markdown
```http
GET /api/v1/users/123 HTTP/1.1
Host: api.example.com
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

HTTP/1.1 200 OK
Content-Type: application/json

{
  "data": {
    "id": "123",
    "name": "John Doe",
    "email": "john@example.com"
  },
  "status": "success"
}
```
```

### 4.4 アラートボックス

重要な情報や注意事項を強調するために、以下のスタイルを使用します：

#### 情報ボックス

```markdown
> **情報**
>
> これは情報メッセージです。追加の背景情報を提供します。
```

#### 注意ボックス

```markdown
> **注意**
>
> これは注意メッセージです。潜在的な問題を回避するための情報を提供します。
```

#### 警告ボックス

```markdown
> **警告**
>
> これは警告メッセージです。重大な問題を回避するための警告を提供します。
```

#### ヒントボックス

```markdown
> **ヒント**
>
> これはヒントメッセージです。タスクを効率的に実行するための提案を提供します。
```

### 4.5 タスクチェックリスト

進捗を視覚的に表示するためのチェックリストを使用します：

```markdown
- [x] 完了したタスク
- [ ] 未完了のタスク
- [~] 進行中のタスク
```

上記のコードは以下のように表示されます：

- [x] 完了したタスク
- [ ] 未完了のタスク
- [~] 進行中のタスク

### 4.6 折りたたみセクション

長い内容を折りたたんで表示するためのセクションを使用できます：

```markdown
<details>
<summary>詳細情報（クリックして展開）</summary>

これは折りたたまれたコンテンツです。
長いコードブロック、詳細な説明、追加の例などを含めることができます。

```typescript
// 長いコードの例
function complexFunction() {
  // ...
}
```

</details>
```

## 5. AIエージェント向けのMarkdown使用ガイドライン

### 5.1 メタデータの一貫性

- すべてのドキュメントには、ファイル命名規約で定義された標準ヘッダーを含めること
- バージョン番号は一貫して更新すること（メジャー.マイナー.パッチ）
- 最終更新日は必ず最新の日付に更新すること
- 作成者情報には、エージェント名とエージェント番号を含めること

### 5.2 参照とリンクの使用

- ドキュメント間のリンクには常に絶対パスを使用すること
- 型定義への参照には、行番号範囲を含めること
- 参照先が移動または変更された場合は、すべての参照を更新すること

### 5.3 エージェント固有の注意点

**要件定義エージェント (#1)**:
- 視覚的なフロー図を積極的に使用すること
- ユーザーストーリーは具体的かつ検証可能な形式で記述すること

**モックアップクリエイター (#2)**:
- モックアップへのリンクを明示的に記載すること
- モックアップの各セクションを詳細に説明すること

**データモデルアーキテクト (#3)**:
- ER図で関係性を視覚化すること
- すべてのプロパティに詳細な説明とバリデーションルールを含めること

**APIデザイナー (#4)**:
- リクエスト/レスポンス例を常に含めること
- エラーケースと処理方法を明確に記述すること

**スコーププランナー (#5)**:
- タスク間の依存関係を明示すること
- リスク管理セクションを詳細に記入すること
- エラー引き継ぎログを最新に保つこと

**プロジェクト分析エージェント (#10)**:
- 分析結果を構造化されたセクションで整理すること
- 発見事項にはソースへの参照を含めること

## 6. サンプルドキュメント

実際の例として、以下のサンプルドキュメントを参照してください：

- [サンプル要件定義書](/docs/samples/sample-requirements.md)
- [サンプルSCOPE_PROGRESS](/docs/samples/sample-current-status.md)
- [サンプルAPI仕様書](/docs/samples/sample-api-spec.md)
- [サンプルデータモデル仕様](/docs/samples/sample-data-model.md)
- [サンプル移行ガイド](/docs/samples/sample-migration-guide.md)

## 7. テンプレートの使用方法

新しいドキュメントを作成する際は、以下の手順に従ってください：

1. ドキュメントの種類に合ったテンプレートを選択する
2. ファイル命名規約に従って適切なファイル名とパスを決定する
3. テンプレートをコピーして新しいファイルを作成する
4. メタデータセクションを正確に入力する
5. 各セクションを適切な内容で埋める
6. 視覚的要素を活用して情報を明確に表現する
7. 関連ドキュメントへの参照を追加する
8. 変更履歴を開始する

## 8. 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|----------|-------|---------|
| 2025-05-16 | 1.0.0 | ドキュメント構造設計チーム | 初版作成 |